!function(t){t.fn.zoom=function(i){var e={align:"left",thumb_image_width:300,thumb_image_height:400,source_image_width:900,source_image_height:1200,zoom_area_width:600,zoom_area_height:"justify",zoom_area_distance:10,zoom_easing:!0,click_to_zoom:!1,zoom_element:"auto",show_descriptions:!0,description_location:"bottom",description_opacity:.7,small_thumbs:3,smallthumb_inactive_opacity:.4,smallthumb_hide_single:!0,smallthumb_select_on_hover:!1,smallthumbs_position:"bottom",show_icon:!0,hide_cursor:!1,speed:600,autoplay:!0,autoplay_interval:6e3,keyboard:!0,right_to_left:!1};i&&t.extend(e,i);var a=t(this);if(a.is("ul")&&a.children("li").length&&a.find(".bzoom_big_image").length){a.addClass("bzoom clearfix").show();var o=a.children("li").addClass("bzoom_thumb"),m=o.length,s=e.autoplay;o.first().addClass("bzoom_thumb_active").show(),m<2&&(s=!1),a.find(".bzoom_thumb_image").css({width:e.thumb_image_width,height:e.thumb_image_height}).show();var h,_,l,u,c=e.thumb_image_width/e.source_image_width,n=e.thumb_image_height/e.source_image_height,d=e.thumb_image_width/e.thumb_image_height;if(t(".bzoom_magnifier").length||(h=t('<li class="bzoom_magnifier"><div class=""><img src="" /></div></li>'),_=h.find("img"),a.append(h),h.css({top:b,left:g}),_.attr("src",a.find(".bzoom_thumb_active .bzoom_thumb_image").attr("src")).css({width:e.thumb_image_width,height:e.thumb_image_height}),h.find("div").css({width:e.thumb_image_width*c,height:e.thumb_image_height*n})),!t(".bzoom_zoom_area").length){l=t('<li class="bzoom_zoom_area"><div><img class="bzoom_zoom_img" /></div></li>'),u=l.find(".bzoom_zoom_img");var b=0,g=0;a.append(l),"left"==e.align&&(b=0,g=0+e.thumb_image_width+e.zoom_area_distance),l.css({top:b,left:g}),u.css({width:e.source_image_width,height:e.source_image_height})}var r={autotime:null,isplay:s,start:function(){this.isplay&&!this.autotime&&(this.autotime=setInterval((function(){x((a.find(".bzoom_thumb_active").index()+1)%e.small_thumbs)}),e.autoplay_interval))},stop:function(){clearInterval(this.autotime),this.autotime=null},restart:function(){this.stop(),this.start()}},p="";if(!t(".bzoom_small_thumbs").length){b=e.thumb_image_height+10;for(var f=e.thumb_image_width,z=e.thumb_image_width/e.small_thumbs-10,v=z/d,w=(smurl="",""),y=0;y<e.small_thumbs;y++)smurl=o.eq(y).find(".bzoom_thumb_image").attr("src"),w+=0==y?'<li class="bzoom_smallthumb_active"><img src="'+smurl+'" alt="small" style="width:'+z+"px; height:"+v+'px;" /></li>':'<li style="opacity:0.4;"><img src="'+smurl+'" alt="small" style="width:'+z+"px; height:"+v+'px;" /></li>';p=t('<li class="bzoom_small_thumbs" style="top:'+b+"px; width:"+f+'px;"><ul class="clearfix" style="width: 485px;">'+w+"</ul></li>"),a.append(p),p.delegate("li","click",(function(i){x(t(this).index()),r.restart()})),r.start()}function x(i){a.find(".bzoom_thumb_active").removeClass("bzoom_thumb_active").stop().animate({opacity:0},e.speed,(function(){t(this).hide()})),p.find(".bzoom_smallthumb_active").removeClass("bzoom_smallthumb_active").stop().animate({opacity:e.smallthumb_inactive_opacity},e.speed),o.eq(i).addClass("bzoom_thumb_active").show().stop().css({opacity:0}).animate({opacity:1},e.speed),p.find("li:eq("+i+")").addClass("bzoom_smallthumb_active").show().stop().css({opacity:e.smallthumb_inactive_opacity}).animate({opacity:1},e.speed),_.attr("src",o.eq(i).find(".bzoom_thumb_image").attr("src"))}e.zoom_area_height=e.zoom_area_width/d,l.find("div").css({width:e.zoom_area_width,height:e.zoom_area_height}),o.add(h).mousemove((function(t){var i,o,m=t.pageX-a.offset().left,s=t.pageY-a.offset().top,l=e.thumb_image_width*c,d=e.thumb_image_height*c,b=0,g=0;b=m<e.thumb_image_width/2?m>l/2?m-l/2:0:m+l/2>e.thumb_image_width?e.thumb_image_width-l:m-l/2,g=s<e.thumb_image_height/2?s>d/2?s-d/2:0:s+d/2>e.thumb_image_height?e.thumb_image_height-d:s-d/2,i=b/c,o=g/n,h.css({left:b,top:g}),_.css({left:-b,top:-g}),u.css({left:-i,top:-o})})).mouseenter((function(i){r.stop(),u.attr("src",t(this).find(".bzoom_big_image").attr("src")),l.css({"background-image":"none"}).stop().fadeIn(400),a.find(".bzoom_thumb_active").stop().animate({opacity:.5},.7*e.speed),h.stop().animate({opacity:1},.7*e.speed).show()})).mouseleave((function(i){l.stop().fadeOut(400),a.find(".bzoom_thumb_active").stop().animate({opacity:1},.7*e.speed),h.stop().animate({opacity:0},.7*e.speed,(function(){t(this).hide()})),r.start()}))}}}(jQuery);